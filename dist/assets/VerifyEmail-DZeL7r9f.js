import{R as g,u as $,f as G,r as J,g as X,h as Y,j as r,P as Z,F as ee,B as V,i as te,S as A,E as B}from"./index-CyKV3DcG.js";import{i as ae}from"./forgot-FJl-9_VP.js";var L=function(a){return typeof a=="object"&&a!==null},ne=function(a){var N=a.value,m=N===void 0?"":N,h=a.numInputs,o=h===void 0?4:h,D=a.onChange,O=a.onPaste,v=a.renderInput,y=a.shouldAutoFocus,x=y===void 0?!1:y,c=a.inputType,l=c===void 0?"text":c,n=a.renderSeparator,w=a.placeholder,j=a.containerStyle,b=a.inputStyle,C=a.skipDefaultStyles,M=C===void 0?!1:C,F=g.useState(0),u=F[0],T=F[1],p=g.useRef([]),S=function(){return m?m.toString().split(""):[]},E=l==="number"||l==="tel";g.useEffect(function(){p.current=p.current.slice(0,o)},[o]),g.useEffect(function(){var e;x&&((e=p.current[0])===null||e===void 0||e.focus())},[x]);var _=function(){if(typeof w=="string"){if(w.length===o)return w;w.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},k=function(e){var t=E?!isNaN(Number(e)):typeof e=="string";return t&&e.trim().length===1},z=function(e){var t=e.target.value;k(t)&&(P(t),f(u+1))},K=function(e){var t=e.nativeEvent,i=e.target.value;if(!k(i)){if(i.length===o){var s=i.split("").some(function(d){return!k(d)});s||(R(i.split("")),f(o-1))}t.data===null&&t.inputType==="deleteContentBackward"&&(e.preventDefault(),P(""),f(u-1)),e.target.value=""}},q=function(e){return function(t){T(t),e.target.select()}},H=function(){T(u-1)},Q=function(e){var t=S();[e.code,e.key].includes("Backspace")?(e.preventDefault(),P(""),f(u-1)):e.code==="Delete"?(e.preventDefault(),P("")):e.code==="ArrowLeft"?(e.preventDefault(),f(u-1)):e.code==="ArrowRight"||e.key===t[u]?(e.preventDefault(),f(u+1)):(e.code==="Spacebar"||e.code==="Space"||e.code==="ArrowUp"||e.code==="ArrowDown")&&e.preventDefault()},f=function(e){var t,i,s=Math.max(Math.min(o-1,e),0);p.current[s]&&((t=p.current[s])===null||t===void 0||t.focus(),(i=p.current[s])===null||i===void 0||i.select(),T(s))},P=function(e){var t=S();t[u]=e[0],R(t)},R=function(e){var t=e.join("");D(t)},U=function(e){var t;e.preventDefault();var i=S(),s=u,d=e.clipboardData.getData("text/plain").slice(0,o-u).split("");if(!(E&&d.some(function(W){return isNaN(Number(W))}))){for(var I=0;I<o;++I)I>=u&&d.length>0&&(i[I]=(t=d.shift())!==null&&t!==void 0?t:"",s++);f(s),R(i)}};return g.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},L(j)&&j),className:typeof j=="string"?j:void 0,onPaste:O},Array.from({length:o},function(e,t){return t}).map(function(e){var t,i,s;return g.createElement(g.Fragment,{key:e},v({value:(t=S()[e])!==null&&t!==void 0?t:"",placeholder:(s=(i=_())===null||i===void 0?void 0:i[e])!==null&&s!==void 0?s:void 0,ref:function(d){return p.current[e]=d},onChange:z,onFocus:function(d){return q(d)(e)},onBlur:H,onKeyDown:Q,onPaste:U,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(M?{}:{width:"1em",textAlign:"center"},L(b)?b:{}),className:typeof b=="string"?b:void 0,type:l,inputMode:E?"numeric":"text",onInput:K},e),e<o-1&&(typeof n=="function"?n(e):n))}))};const ie=()=>{const a=$(),{email:N}=G(),[m,h]=J.useState(""),[o,{isLoading:D}]=X(),[O,{isLoading:v}]=Y(),y=async()=>{var c;if(!/^\d{6}$/.test(m))return te.fire({icon:"error",title:"Failed",text:"Please enter a valid 6-digit OTP."});try{const l=await o({code:m}).unwrap();localStorage.setItem("token",(c=l==null?void 0:l.data)==null?void 0:c.token),console.log(l),A({title:"Success",text:l.message||"Success"}),a("/auth/reset-password")}catch(l){B({title:"",text:l.data.message||l.data||"Something went wrong!"})}},x=async()=>{var c,l;try{const n=await O().unwrap();A({title:"OTP Sent",text:(n==null?void 0:n.message)||((c=n==null?void 0:n.data)==null?void 0:c.message)||"OTP has been resent successfully!"})}catch(n){B({title:"Error",text:((l=n==null?void 0:n.data)==null?void 0:l.message)||(n==null?void 0:n.message)||"Failed to resend OTP."})}};return r.jsxs("div",{className:"min-h-[92vh] w-full grid grid-cols-1 lg:grid-cols-2 justify-center items-center gap-1 lg:gap-8 bg-white",children:[r.jsx("div",{className:"lg:border-r-2 border-gray mx-auto w-[90%] lg:p-[8%]",children:r.jsx("img",{src:ae,alt:"Verify Email Illustration"})}),r.jsx("div",{className:"lg:p-[5%] order-first lg:order-last",children:r.jsxs("div",{className:"w-full py-[64px] lg:px-[44px] space-y-5",children:[r.jsxs("div",{className:"flex flex-col items-center lg:items-start",children:[r.jsx(Z,{backPath:"/auth/forgot-password",title:"Verify OTP",disbaledBackBtn:!0}),r.jsx("p",{className:"drop-shadow text-[#646464] mt-5 text-center lg:text-left",children:"Please check your email. We have sent a code to contact @gmail.com"})]}),r.jsxs(ee,{name:"normal_login",layout:"vertical",initialValues:{remember:!0},onFinish:y,children:[r.jsx("div",{className:"py-3 text-2xl font-semibold flex justify-center",children:r.jsx(ne,{value:m,onChange:h,numInputs:6,inputStyle:{height:"70px",width:"70px",margin:"20px",border:"1px solid #142F62",outline:"none",borderRadius:"16px"},renderSeparator:r.jsx("span",{children:" "}),renderInput:c=>r.jsx("input",{...c,"aria-label":"OTP Input"})})}),r.jsx("div",{className:"w-full flex justify-center pt-2",children:r.jsx(V,{type:"default",size:"large",onClick:x,loading:v,children:v?"Resending...":"Resend OTP"})}),r.jsx("div",{className:"w-full flex justify-center pt-5",children:r.jsx(V,{type:"primary",size:"large",htmlType:"submit",className:"w-full px-2",loading:D,children:"Verify"})})]})]})})]})};export{ie as default};
