import{R as p,u as $,f as G,r as J,g as X,h as Y,j as r,P as Z,F as ee,B as k,i as te,S as A,E as B}from"./index-OACXyiSm.js";var L=function(a){return typeof a=="object"&&a!==null},ae=function(a){var h=a.value,g=h===void 0?"":h,m=a.numInputs,o=m===void 0?4:m,O=a.onChange,D=a.onPaste,y=a.renderInput,x=a.shouldAutoFocus,w=x===void 0?!1:x,i=a.inputType,v=i===void 0?"text":i,n=a.renderSeparator,b=a.placeholder,j=a.containerStyle,S=a.inputStyle,F=a.skipDefaultStyles,M=F===void 0?!1:F,V=p.useState(0),u=V[0],E=V[1],f=p.useRef([]),P=function(){return g?g.toString().split(""):[]},T=v==="number"||v==="tel";p.useEffect(function(){f.current=f.current.slice(0,o)},[o]),p.useEffect(function(){var e;w&&((e=f.current[0])===null||e===void 0||e.focus())},[w]);var _=function(){if(typeof b=="string"){if(b.length===o)return b;b.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}},R=function(e){var t=T?!isNaN(Number(e)):typeof e=="string";return t&&e.trim().length===1},z=function(e){var t=e.target.value;R(t)&&(N(t),d(u+1))},q=function(e){var t=e.nativeEvent,s=e.target.value;if(!R(s)){if(s.length===o){var l=s.split("").some(function(c){return!R(c)});l||(C(s.split("")),d(o-1))}t.data===null&&t.inputType==="deleteContentBackward"&&(e.preventDefault(),N(""),d(u-1)),e.target.value=""}},K=function(e){return function(t){E(t),e.target.select()}},H=function(){E(u-1)},Q=function(e){var t=P();[e.code,e.key].includes("Backspace")?(e.preventDefault(),N(""),d(u-1)):e.code==="Delete"?(e.preventDefault(),N("")):e.code==="ArrowLeft"?(e.preventDefault(),d(u-1)):e.code==="ArrowRight"||e.key===t[u]?(e.preventDefault(),d(u+1)):(e.code==="Spacebar"||e.code==="Space"||e.code==="ArrowUp"||e.code==="ArrowDown")&&e.preventDefault()},d=function(e){var t,s,l=Math.max(Math.min(o-1,e),0);f.current[l]&&((t=f.current[l])===null||t===void 0||t.focus(),(s=f.current[l])===null||s===void 0||s.select(),E(l))},N=function(e){var t=P();t[u]=e[0],C(t)},C=function(e){var t=e.join("");O(t)},U=function(e){var t;e.preventDefault();var s=P(),l=u,c=e.clipboardData.getData("text/plain").slice(0,o-u).split("");if(!(T&&c.some(function(W){return isNaN(Number(W))}))){for(var I=0;I<o;++I)I>=u&&c.length>0&&(s[I]=(t=c.shift())!==null&&t!==void 0?t:"",l++);d(l),C(s)}};return p.createElement("div",{style:Object.assign({display:"flex",alignItems:"center"},L(j)&&j),className:typeof j=="string"?j:void 0,onPaste:D},Array.from({length:o},function(e,t){return t}).map(function(e){var t,s,l;return p.createElement(p.Fragment,{key:e},y({value:(t=P()[e])!==null&&t!==void 0?t:"",placeholder:(l=(s=_())===null||s===void 0?void 0:s[e])!==null&&l!==void 0?l:void 0,ref:function(c){return f.current[e]=c},onChange:z,onFocus:function(c){return K(c)(e)},onBlur:H,onKeyDown:Q,onPaste:U,autoComplete:"off","aria-label":"Please enter OTP character ".concat(e+1),style:Object.assign(M?{}:{width:"1em",textAlign:"center"},L(S)?S:{}),className:typeof S=="string"?S:void 0,type:v,inputMode:T?"numeric":"text",onInput:q},e),e<o-1&&(typeof n=="function"?n(e):n))}))};const ne="/assets/verify-E1nOdqb6.png",se=()=>{const a=$(),{email:h}=G(),[g,m]=J.useState(""),[o,{isLoading:O}]=X(),[D,{isLoading:y}]=Y(),x=async()=>{if(!/^\d{6}$/.test(g))return te.fire({icon:"error",title:"Failed",text:"Please enter a valid 6-digit OTP."});try{const i=await o({code:g}).unwrap();console.log(i),A({title:"Success",text:i.message||"Success"}),a("/auth/reset-password")}catch(i){B({title:"",text:i.data.message||i.data||"Something went wrong!"})}},w=async()=>{var i,v;try{const n=await D(h).unwrap();A({title:"OTP Sent",text:(n==null?void 0:n.message)||((i=n==null?void 0:n.data)==null?void 0:i.message)||"OTP has been resent successfully!"})}catch(n){B({title:"Error",text:((v=n==null?void 0:n.data)==null?void 0:v.message)||(n==null?void 0:n.message)||"Failed to resend OTP."})}};return r.jsxs("div",{className:"min-h-[92vh] w-full grid grid-cols-1 lg:grid-cols-2 justify-center items-center gap-1 lg:gap-8 bg-white",children:[r.jsx("div",{className:"lg:border-r-2 border-gray mx-auto w-[90%] lg:p-[8%]",children:r.jsx("img",{src:ne,alt:"Verify Email Illustration"})}),r.jsx("div",{className:"lg:p-[5%] order-first lg:order-last",children:r.jsxs("div",{className:"w-full py-[64px] lg:px-[44px] space-y-5",children:[r.jsxs("div",{className:"flex flex-col items-center lg:items-start",children:[r.jsx(Z,{backPath:"/auth/forgot-password",title:"Verify OTP",disbaledBackBtn:!0}),r.jsx("p",{className:"drop-shadow text-[#646464] mt-5 text-center lg:text-left",children:"Please check your email. We have sent a code to contact @gmail.com"})]}),r.jsxs(ee,{name:"normal_login",layout:"vertical",initialValues:{remember:!0},onFinish:x,children:[r.jsx("div",{className:"py-3 text-2xl font-semibold flex justify-center",children:r.jsx(ae,{value:g,onChange:m,numInputs:6,inputStyle:{height:"70px",width:"70px",margin:"20px",border:"1px solid #142F62",outline:"none",borderRadius:"16px"},renderSeparator:r.jsx("span",{children:" "}),renderInput:i=>r.jsx("input",{...i,"aria-label":"OTP Input"})})}),r.jsx("div",{className:"w-full flex justify-center pt-2",children:r.jsx(k,{type:"default",size:"large",onClick:w,loading:y,children:y?"Resending...":"Resend OTP"})}),r.jsx("div",{className:"w-full flex justify-center pt-5",children:r.jsx(k,{type:"primary",size:"large",htmlType:"submit",className:"w-full px-2",loading:O,children:"Verify"})})]})]})})]})};export{se as default};
